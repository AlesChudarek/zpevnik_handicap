<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Zpěvník 27</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f7f7f7;
      text-align: center;
    }
    h1 {
      margin-bottom: 20px;
    }
    .viewer {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .page {
      width: 45%;
      aspect-ratio: 1/1.4; /* poměr A5 */
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;       /* bílý papír */
      border-radius: 6px;      /* jemné zaoblení rohů */
      box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* stín pod stránkou */
      border: 1px solid #ddd;
    }
    .page img {
      max-width: 95%;
      max-height: 95%;
      border-radius: 3px;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 20px;
    }
    .controls button {
      padding: 8px 15px;
      font-size: 16px;
      cursor: pointer;
    }
    .controls input {
      width: 100px;
      padding: 5px;
      text-align: center;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>Zpěvník 27</h1>

  <div class="viewer">
    <div id="pageLeft" class="page"></div>
    <div id="pageRight" class="page"></div>
  </div>

  <div class="controls">
    <button onclick="prev()">◀</button>
    <input type="text" id="pageInput" value="1" 
           onfocus="this.value=''" 
           onkeydown="if(event.key==='Enter'){goToPage()}">
    <button onclick="next()">▶</button>
  </div>

  <script>
    const totalPages = 24; 
    let currentPage = 1; // levá strana aktuální dvojstrany

    function updateViewer() {
      const left = document.getElementById("pageLeft");
      const right = document.getElementById("pageRight");
      const input = document.getElementById("pageInput");

      if (currentPage === 1) {
        // první strana sama vpravo
        left.innerHTML = "";
        right.innerHTML = `<img src="pages/page1.png" alt="Strana 1">`;
        input.value = "1";
      } else {
        // normální dvojstrany
        left.innerHTML = `<img src="pages/page${currentPage}.png" alt="Strana ${currentPage}">`;
        let rightPage = currentPage + 1;
        if (rightPage <= totalPages) {
          right.innerHTML = `<img src="pages/page${rightPage}.png" alt="Strana ${rightPage}">`;
          input.value = `${currentPage}–${rightPage}`;
        } else {
          // poslední lichá strana sama vlevo
          right.innerHTML = "";
          input.value = `${currentPage}`;
        }
      }
    }

    function prev() {
      if (currentPage > 1) {
        currentPage -= 2;
        if (currentPage < 1) currentPage = 1;
        updateViewer();
      }
    }

    function next() {
      if (currentPage === 1) {
        currentPage = 2; // po titulní straně skočíme na 2–3
      } else if (currentPage + 1 < totalPages) {
        currentPage += 2;
      } else if (currentPage < totalPages) {
        currentPage = totalPages; // poslední lichá
      }
      updateViewer();
    }

    function goToPage() {
      let p = parseInt(document.getElementById("pageInput").value);
      if (!isNaN(p) && p >= 1 && p <= totalPages) {
        if (p === 1) {
          currentPage = 1;
        } else if (p === totalPages && totalPages % 2 === 0) {
          currentPage = totalPages; // poslední strana sama
        } else {
          currentPage = (p % 2 === 0) ? p : p - 1; // zarovnáme na levou sudou
        }
        updateViewer();
      }
    }

    // první vykreslení
    updateViewer();
  </script>
</body>
</html>